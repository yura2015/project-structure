{"version":3,"sources":["webpack:///./src/pages/sales/rest-header.js","webpack:///./src/pages/sales/index.js","webpack:///./src/utils/fetch-json.js","webpack:///./src/components/sortable-table/index.js","webpack:///./src/components/range-picker/index.js"],"names":["header","id","title","sortable","sortType","Page","constructor","from","to","this","components","sortableTable","url","searchParams","set","sorted","order","start","end","data","fetchJson","addRows","initComponents","now","Date","setMonth","getMonth","rangePicker","RangePicker","SortableTable","isSortlocaly","randerComponents","Object","keys","forEach","component","root","subElements","element","append","render","document","createElement","innerHTML","template","firstElementChild","getSubElements","initEventListener","querySelectorAll","reduce","accum","subElement","dataset","addEventListener","event","detail","updateTable","remove","destroy","params","response","body","fetch","toString","err","FetchError","ok","errorText","statusText","json","error","message","status","Error","super","window","reason","alert","headersConfig","find","item","isSortLocally","step","async","bottom","getBoundingClientRect","documentElement","clientHeight","loading","loadData","updateBody","column","target","closest","newOrder","asc","desc","toggleOrder","arrow","sortLocally","sortOnServer","URL","update","wrapper","getTable","renderRows","initEventListeners","getTableRows","rows","childNodes","classList","add","getTableHeader","map","getHeaderRow","join","getHeaderSortingArrow","getTableBody","getTableRow","onSortClick","onWindowScroll","sortedData","sortData","length","arr","customSorting","direction","sort","a","b","localeCompare","removeEventListener","date","toLocaleString","dateStyle","isOpen","contains","isRangePicker","close","showDateFrom","selected","formatDate","input","selector","onDocumentClick","toggle","onSelectorClick","renderDateRangePicker","onRangePickerCellClick","showDate1","showDate2","renderCalendar","controlLeft","querySelector","controlRight","prev","next","renderHighlight","cell","value","cellDate","toISOString","selectedFromElem","selectedToElem","showDate","setDate","monthStr","month","table","dayIndex","getDay","getDate","dateValue","selectingFrom","dispatchEvent","CustomEvent","bubbles"],"mappings":"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","file":"sales-index-js-6.js","sourcesContent":["\r\nconst header = [\r\n\r\n  {\r\n    id: 'id',\r\n    title: 'id',\r\n    sortable: true,\r\n    sortType: 'string'\r\n  },\r\n  {\r\n    id: 'user',\r\n    title: 'Клиент',\r\n    sortable: true,\r\n    sortType: 'string'\r\n  },\r\n  {\r\n    id: 'createdAt',\r\n    title: 'Дата',\r\n    sortable: true,\r\n    sortType: 'number'\r\n  },\r\n  {\r\n    id: 'phone',\r\n    title: 'Тел.',\r\n    sortable: true,\r\n    sortType: 'string'\r\n  },\r\n  {\r\n    id: 'totalCost',\r\n    title: 'Цена',\r\n    sortable: true,\r\n    sortType: 'number'\r\n  },\r\n  {\r\n    id: 'delivery',\r\n    title: 'Статус',\r\n    sortable: true,\r\n    sortType: 'number'\r\n  }\r\n];\r\n\r\nexport default header;\r\n","import RangePicker from '../../components/range-picker/index.js';\r\nimport SortableTable from '../../components/sortable-table/index.js';\r\nimport header from './rest-header.js';\r\nimport fetchJson from '../../utils/fetch-json.js';\r\n\r\nconst BACKEND_URL = `${process.env.BACKEND_URL}`; \r\n\r\nexport default class Page {\r\n    element;\r\n    subElements = {};\r\n    components = {};\r\n\r\n    constructor() {\r\n\r\n    }\r\n\r\n    async updateTable(from, to) {\r\n        this.components.sortableTable.url.searchParams.set('createdAt_gte', from);\r\n        this.components.sortableTable.url.searchParams.set('createdAt_lte', to);\r\n        this.components.sortableTable.url.searchParams.set('_sort',  this.components.sortableTable.sorted.id);\r\n        this.components.sortableTable.url.searchParams.set('_order',  this.components.sortableTable.sorted.order);\r\n        this.components.sortableTable.url.searchParams.set('_start',  this.components.sortableTable.start);\r\n        this.components.sortableTable.url.searchParams.set('_end',  this.components.sortableTable.end);\r\n        const data = await fetchJson(this.components.sortableTable.url);\r\n//        const arr = data.filter(item => \r\n//           item.quantity > this.from && item.quantity < this.to \r\n//       );\r\n        this.components.sortableTable.addRows(data);\r\n    }\r\n\r\n   initComponents() {\r\n        const now = new Date(); \r\n        const from = new Date(); \r\n        const to = new Date( now.setMonth( now.getMonth() - 1 ) );\r\n        const rangePicker = new RangePicker( {from, to } );\r\n\r\n        const sortableTable = new SortableTable(header, {\r\n            url: `api/rest/orders`,  \r\n            isSortlocaly: true\r\n        });\r\n\r\n\r\n        this.components = {\r\n            rangePicker,\r\n            sortableTable,\r\n        };\r\n\r\n       \r\n    }\r\n\r\n    randerComponents() {\r\n        Object.keys(this.components).forEach(component => {\r\n            const root = this.subElements[component];\r\n            const { element } = this.components[component];\r\n\r\n            root.append(element);\r\n        });\r\n    }\r\n\r\n\r\n    get template() {\r\n        return ` <div class=\"sales full-height flex column\">\r\n                   <div class=\"content__top-panel\">\r\n                     <h1 class=\"page_title\">Продажи</h1>\r\n                     <!---  -->\r\n                     <div data-element=\"rangePicker\">\r\n                     </div>\r\n                   </div>\r\n\r\n                   <div data-element=\"sortableTable\">\r\n                   <!---  -->\r\n                   </div>\r\n                </div>\r\n               `\r\n    }\r\n     render() {\r\n        \r\n        this.element = document.createElement('div'); // (*)\r\n        this.element.innerHTML = this.template;\r\n        this.element = this.element.firstElementChild;\r\n        this.subElements = this.getSubElements(this.element);\r\n\r\n        this.initComponents();\r\n        this.randerComponents() ;\r\n        this.initEventListener();\r\n        return this.element;\r\n     }\r\n\r\n     getSubElements(element) {\r\n         const elements = element.querySelectorAll('[data-element]');\r\n\r\n         return [...elements].reduce((accum, subElement) => {\r\n          accum[subElement.dataset.element] = subElement;\r\n\r\n          return accum;\r\n        }, {});\r\n     }\r\n\r\n     initEventListener() {\r\n         this.components.rangePicker.element.addEventListener('date-select', event => {  \r\n            const {from, to } = event.detail;\r\n            this.updateTable(from, to);\r\n        });\r\n     }\r\n     \r\n\r\n      remove () {\r\n        if (this.element) {\r\n            this.element.remove();\r\n        }\r\n     }\r\n\r\n      // NOTE: удаляем обработчики событий, если они есть\r\n      destroy() {\r\n        this.remove();\r\n        for(let component in this.components) {\r\n            this.components[component].destroy();\r\n        }\r\n        this.element = null;\r\n        this.subElements = {};\r\n      }\r\n\r\n\r\n}\r\n\r\n//export class SortableTableSales extends SortableTable {\r\n//    range: { from, to };\r\n//    \r\n//    constructor(headersConfig = [], {\r\n//        url = '',\r\n//        sorted = {\r\n//          id: headersConfig.find(item => item.sortable).id,\r\n//          order: 'asc'\r\n//        },\r\n//        isSortLocally = false,\r\n//        step = 20,\r\n//        start = 1,\r\n//        end = start + step,\r\n//        range = {\r\n//          from: new Date(),\r\n//          to: new Date()\r\n//        }\r\n//    } = {})) {\r\n//        \r\n//        super(headersConfig = [], {\r\n//            url = '',\r\n//            sorted = {\r\n//              id: headersConfig.find(item => item.sortable).id,\r\n//              order: 'asc'\r\n//            },\r\n//            isSortLocally = false,\r\n//            step = 20,\r\n//            start = 1,\r\n//            end = start + step\r\n//        );\r\n//        this.range = range;\r\n//    }\r\n\r\n//    async loadData(id, order, start = this.start, end = this.end) {\r\n//        this.url.searchParams.set('createdAt_gte', this.from);\r\n//        this.url.searchParams.set('createdAt_lte', this.from);\r\n//        this.url.searchParams.set('_sort', id);\r\n//        this.url.searchParams.set('_order', order);\r\n//        this.url.searchParams.set('_start', start);\r\n//        this.url.searchParams.set('_end', end);\r\n\r\n//        this.element.classList.add('sortable-table_loading');\r\n\r\n//        const data = await fetchJson(this.url); // n кол-во времени\r\n\r\n//        this.element.classList.remove('sortable-table_loading');\r\n//    //    console.log(this.url);\r\n//    //    console.log(data);\r\n//        return data;\r\n//   }\r\n//}","// same as fetch, but throws FetchError in case of errors\r\n// status >= 400 is an error\r\n// network error / json error are errors\r\n\r\nexport default async function(url, params) {\r\n  let response;\r\n\r\n  try {\r\n    // NOTE: \"toString\" call needed for correct work of \"jest-fetch-mock\"\r\n    response = await fetch(url.toString(), params);\r\n  } catch(err) {\r\n    throw new FetchError(response, \"Network error has occurred.\");\r\n  }\r\n\r\n  let body;\r\n\r\n  if (!response.ok) {\r\n    let errorText = response.statusText; // Not Found (for 404)\r\n\r\n    try {\r\n      body = await response.json();\r\n\r\n      errorText = (body.error && body.error.message) || (body.data && body.data.error && body.data.error.message) || errorText;\r\n    } catch (error) { /* ignore failed body */ }\r\n\r\n    let message = `Error ${response.status}: ${errorText}`;\r\n\r\n    throw new FetchError(response, body, message);\r\n  }\r\n\r\n  try {\r\n    return await response.json();\r\n  } catch(err) {\r\n    throw new FetchError(response, null, err.message);\r\n  }\r\n}\r\n\r\nexport class FetchError extends Error {\r\n  name = \"FetchError\";\r\n\r\n  constructor(response, body, message) {\r\n    super(message);\r\n    this.response = response;\r\n    this.body = body;\r\n  }\r\n}\r\n\r\n// handle uncaught failed fetch through\r\nwindow.addEventListener('unhandledrejection', event => {\r\n  if (event.reason instanceof FetchError) {\r\n    alert(event.reason.message);\r\n  }\r\n});\r\n\r\n","import fetchJson from \"../../utils/fetch-json.js\";\r\n\r\nconst BACKEND_URL = `${process.env.BACKEND_URL}`; \r\n\r\nexport default class SortableTable {\r\n  element;\r\n  subElements = {};\r\n  data = [];\r\n  loading = false;\r\n  step = 20;\r\n  start = 1;\r\n  end = this.start + this.step;\r\n\r\n  onWindowScroll = async () => {\r\n    const { bottom } = this.element.getBoundingClientRect();\r\n    const { id, order } = this.sorted;\r\n\r\n    if (bottom < document.documentElement.clientHeight && !this.loading && !this.isSortLocally) {\r\n      this.start = this.end;\r\n      this.end = this.start + this.step;\r\n\r\n      this.loading = true;\r\n\r\n      const data = await this.loadData(id, order, this.start, this.end);\r\n\r\n      this.updateBody(data);\r\n\r\n      this.loading = false;\r\n    }\r\n  };\r\n\r\n  onSortClick = event => {\r\n    const column = event.target.closest('[data-sortable=\"true\"]');\r\n    const toggleOrder = order => {\r\n      const orders = {\r\n        asc: 'desc',\r\n        desc: 'asc'\r\n      };\r\n\r\n      return orders[order];\r\n    };\r\n\r\n    if (column) {\r\n      const { id, order } = column.dataset;\r\n      const newOrder = toggleOrder(order);\r\n\r\n      this.sorted = {\r\n        id,\r\n        order: newOrder\r\n      };\r\n\r\n      column.dataset.order = newOrder;\r\n      column.append(this.subElements.arrow);\r\n\r\n      if (this.isSortLocally) {\r\n        this.sortLocally(id, newOrder);\r\n      } else {\r\n        this.sortOnServer(id, newOrder, 1, 1 + this.step);\r\n      }\r\n    }\r\n  };\r\n\r\n  constructor(headersConfig = [], {\r\n    url = '',\r\n    sorted = {\r\n      id: headersConfig.find(item => item.sortable).id,\r\n      order: 'asc'\r\n    },\r\n    isSortLocally = false,\r\n    step = 20,\r\n    start = 1,\r\n    end = start + step\r\n  } = {}) {\r\n\r\n    this.headersConfig = headersConfig;\r\n    this.url = new URL(url, BACKEND_URL);\r\n    this.sorted = sorted;\r\n    this.isSortLocally = isSortLocally;\r\n    this.step = step;\r\n    this.start = start;\r\n    this.end = end;\r\n\r\n    this.render();\r\n    this.update();\r\n  }\r\n\r\n  render() {\r\n    const wrapper = document.createElement('div');\r\n\r\n    wrapper.innerHTML = this.getTable([]);\r\n\r\n    const element = wrapper.firstElementChild;\r\n\r\n    this.element = element;\r\n    this.subElements = this.getSubElements(element);\r\n  }\r\n\r\n  async update () {\r\n    const {id, order} = this.sorted;\r\n    this.data = await this.loadData(id, order, this.start, this.end);\r\n    \r\n    this.renderRows([...this.data]);\r\n    this.initEventListeners();\r\n  }\r\n\r\n  addRows(data) {\r\n\r\n    this.subElements.body.innerHTML = this.getTableRows(data);\r\n  }\r\n\r\n  updateBody(data) {\r\n    const rows = document.createElement('div');\r\n\r\n    data = [...this.data, ...data];\r\n    rows.innerHTML = this.getTableRows(data);\r\n\r\n    this.subElements.body.append(...rows.childNodes);\r\n  }\r\n\r\n  //Request URL: https://course-js.javascript.ru/api/rest/orders?createdAt_gte=2021-05-14T10%3A35%3A51.666Z&createdAt_lte=2021-06-13T10%3A35%3A51.666Z&_sort=createdAt&_order=desc&_start=0&_end=30\r\n  async loadData(id, order, start = this.start, end = this.end) {\r\n    this.url.searchParams.set('_sort', id);\r\n    this.url.searchParams.set('_order', order);\r\n    this.url.searchParams.set('_start', start);\r\n    this.url.searchParams.set('_end', end);\r\n\r\n    this.element.classList.add('sortable-table_loading');\r\n\r\n    const data = await fetchJson(this.url); // n кол-во времени\r\n\r\n    this.element.classList.remove('sortable-table_loading');\r\n    return data;\r\n  }\r\n\r\n  getTableHeader() {\r\n    return `<div data-element=\"header\" class=\"sortable-table__header sortable-table__row\">\r\n      ${this.headersConfig.map(item => this.getHeaderRow(item)).join('')}\r\n    </div>`;\r\n  }\r\n\r\n  getHeaderRow({id, title, sortable}) {\r\n    const order = this.sorted.id === id ? this.sorted.order : 'asc';\r\n\r\n    return `\r\n      <div class=\"sortable-table__cell\" data-id=\"${id}\" data-sortable=\"${sortable}\" data-order=\"${order}\">\r\n        <span>${title}</span>\r\n        ${this.getHeaderSortingArrow(id)}\r\n      </div>\r\n    `;\r\n  }\r\n\r\n  getHeaderSortingArrow(id) {\r\n    const isOrderExist = this.sorted.id === id ? this.sorted.order : '';\r\n\r\n    return isOrderExist\r\n      ? `<span data-element=\"arrow\" class=\"sortable-table__sort-arrow\">\r\n          <span class=\"sort-arrow\"></span>\r\n        </span>`\r\n      : '';\r\n  }\r\n\r\n  getTableBody(data) {\r\n    return `\r\n      <div data-element=\"body\" class=\"sortable-table__body\">\r\n        ${this.getTableRows(data)}\r\n      </div>`;\r\n  }\r\n\r\n  getTableRows(data) {\r\n    return data.map(item => `\r\n      <div class=\"sortable-table__row\">\r\n        ${this.getTableRow(item, data)}\r\n      </div>`\r\n    ).join('');\r\n  }\r\n\r\n  getTableRow(item) {\r\n    const cells = this.headersConfig.map(({id, template}) => {\r\n      return {\r\n        id,\r\n        template\r\n      };\r\n    });\r\n\r\n    return cells.map(({id, template}) => {\r\n      return template\r\n        ? template(item[id])\r\n        : `<div class=\"sortable-table__cell\">${item[id]}</div>`;\r\n    }).join('');\r\n  }\r\n\r\n  getTable(data=[]) {\r\n    return `\r\n      <div class=\"sortable-table\">\r\n        ${this.getTableHeader()}\r\n        ${this.getTableBody(data)}\r\n        <div data-element=\"loading\" class=\"loading-line sortable-table__loading-line\"></div>\r\n        <div data-element=\"emptyPlaceholder\" class=\"sortable-table__empty-placeholder\">\r\n          No products\r\n        </div>\r\n      </div>`;\r\n  }\r\n\r\n  initEventListeners() {\r\n    this.subElements.header.addEventListener('pointerdown', this.onSortClick);\r\n\r\n    document.addEventListener('scroll', this.onWindowScroll);\r\n  }\r\n\r\n  sortLocally(id, order) {\r\n    const sortedData = this.sortData(id, order);\r\n\r\n    this.subElements.body.innerHTML = this.getTableBody(sortedData);\r\n  }\r\n\r\n  async sortOnServer(id, order, start, end) {\r\n    const data = await this.loadData(id, order, start, end);\r\n\r\n    this.renderRows(data);\r\n  }\r\n\r\n  renderRows(data) {\r\n    if (data.length) {\r\n      this.element.classList.remove('sortable-table_empty');\r\n      this.addRows(data);\r\n    } else {\r\n      this.element.classList.add('sortable-table_empty');\r\n    }\r\n  }\r\n\r\n  sortData(id, order) {\r\n    const arr = [...this.data];\r\n    const column = this.headersConfig.find(item => item.id === id);\r\n    const {sortType, customSorting} = column;\r\n    const direction = order === 'asc' ? 1 : -1;\r\n\r\n    return arr.sort((a, b) => {\r\n      switch (sortType) {\r\n      case 'number':\r\n        return direction * (a[id] - b[id]);\r\n      case 'string':\r\n        return direction * a[id].localeCompare(b[id], 'ru');\r\n      case 'custom':\r\n        return direction * customSorting(a, b);\r\n      default:\r\n        return direction * (a[id] - b[id]);\r\n      }\r\n    });\r\n  }\r\n\r\n  getSubElements(element) {\r\n    const elements = element.querySelectorAll('[data-element]');\r\n\r\n    return [...elements].reduce((accum, subElement) => {\r\n      accum[subElement.dataset.element] = subElement;\r\n\r\n      return accum;\r\n    }, {});\r\n  }\r\n\r\n  remove() {\r\n    this.element.remove();\r\n  }\r\n\r\n  destroy() {\r\n    this.remove();\r\n    this.subElements = {};\r\n    document.removeEventListener('scroll', this.onWindowScroll);\r\n  }\r\n}","export default class RangePicker {\r\n  element = null;\r\n  subElements = {};\r\n  selectingFrom = true;\r\n  selected = {\r\n    from: new Date(),\r\n    to: new Date()\r\n  };\r\n\r\n  static formatDate(date) {\r\n    return date.toLocaleString('ru', {dateStyle: 'short'});\r\n  }\r\n\r\n  onDocumentClick = event => {\r\n    const isOpen = this.element.classList.contains('rangepicker_open');\r\n    const isRangePicker = this.element.contains(event.target);\r\n\r\n    if (isOpen && !isRangePicker) {\r\n      this.close();\r\n    }\r\n  };\r\n\r\n  constructor({from = new Date(), to = new Date()} = {}) {\r\n    this.showDateFrom = new Date(from);\r\n    this.selected = {from, to};\r\n\r\n    this.render();\r\n  }\r\n\r\n  get template() {\r\n    const from = RangePicker.formatDate(this.selected.from);\r\n    const to = RangePicker.formatDate(this.selected.to);\r\n\r\n    return `<div class=\"rangepicker\">\r\n      <div class=\"rangepicker__input\" data-element=\"input\">\r\n        <span data-element=\"from\">${from}</span> -\r\n        <span data-element=\"to\">${to}</span>\r\n      </div>\r\n      <div class=\"rangepicker__selector\" data-element=\"selector\"></div>\r\n    </div>`;\r\n  }\r\n\r\n  render() {\r\n    const element = document.createElement('div');\r\n\r\n    element.innerHTML = this.template;\r\n\r\n    this.element = element.firstElementChild;\r\n    this.subElements = this.getSubElements(element);\r\n\r\n    this.initEventListeners();\r\n  }\r\n  \r\n  getSubElements(element) {\r\n    const subElements = {};\r\n\r\n    for (const subElement of element.querySelectorAll('[data-element]')) {\r\n      subElements[subElement.dataset.element] = subElement;\r\n    }\r\n\r\n    return subElements;\r\n  }\r\n\r\n  initEventListeners() {\r\n    const {input, selector} = this.subElements;\r\n\r\n    document.addEventListener('click', this.onDocumentClick, true);\r\n    input.addEventListener('click', () => this.toggle());\r\n    selector.addEventListener('click', event => this.onSelectorClick(event));\r\n  }\r\n\r\n  toggle() {\r\n    this.element.classList.toggle('rangepicker_open');\r\n    this.renderDateRangePicker();\r\n  }\r\n\r\n  onSelectorClick({target}) {\r\n    if (target.classList.contains('rangepicker__cell')) {\r\n      this.onRangePickerCellClick(target);\r\n    }\r\n  }\r\n\r\n  close() {\r\n    this.element.classList.remove('rangepicker_open');\r\n  }\r\n\r\n  renderDateRangePicker() {\r\n    const showDate1 = new Date(this.showDateFrom);\r\n    const showDate2 = new Date(this.showDateFrom);\r\n    const { selector } = this.subElements;\r\n\r\n    showDate2.setMonth(showDate2.getMonth() + 1);\r\n\r\n    selector.innerHTML = `\r\n      <div class=\"rangepicker__selector-arrow\"></div>\r\n      <div class=\"rangepicker__selector-control-left\"></div>\r\n      <div class=\"rangepicker__selector-control-right\"></div>\r\n      ${this.renderCalendar(showDate1)}\r\n      ${this.renderCalendar(showDate2)}\r\n    `;\r\n\r\n    const controlLeft = selector.querySelector('.rangepicker__selector-control-left');\r\n    const controlRight = selector.querySelector('.rangepicker__selector-control-right');\r\n\r\n    controlLeft.addEventListener('click', () => this.prev());\r\n    controlRight.addEventListener('click', () => this.next());\r\n\r\n    this.renderHighlight();\r\n  }\r\n\r\n  prev() {\r\n    this.showDateFrom.setMonth(this.showDateFrom.getMonth() - 1);\r\n    this.renderDateRangePicker();\r\n  }\r\n\r\n  next() {\r\n    this.showDateFrom.setMonth(this.showDateFrom.getMonth() + 1);\r\n    this.renderDateRangePicker();\r\n  }\r\n\r\n  renderHighlight() {\r\n    const { from, to } = this.selected;\r\n\r\n    for (const cell of this.element.querySelectorAll('.rangepicker__cell')) {\r\n      const { value } = cell.dataset;\r\n      const cellDate = new Date(value);\r\n\r\n      cell.classList.remove('rangepicker__selected-from');\r\n      cell.classList.remove('rangepicker__selected-between');\r\n      cell.classList.remove('rangepicker__selected-to');\r\n\r\n      if (from && value === from.toISOString()) {\r\n        cell.classList.add('rangepicker__selected-from');\r\n      } else if (to && value === to.toISOString()) {\r\n        cell.classList.add('rangepicker__selected-to');\r\n      } else if (from && to && cellDate >= from && cellDate <= to) {\r\n        cell.classList.add('rangepicker__selected-between');\r\n      }\r\n    }\r\n\r\n    if (from) {\r\n      const selectedFromElem = this.element.querySelector(`[data-value=\"${from.toISOString()}\"]`);\r\n      if (selectedFromElem) {\r\n        selectedFromElem.closest('.rangepicker__cell').classList.add('rangepicker__selected-from');\r\n      }\r\n    }\r\n\r\n    if (to) {\r\n      const selectedToElem = this.element.querySelector(`[data-value=\"${to.toISOString()}\"]`);\r\n      if (selectedToElem) {\r\n        selectedToElem.closest('.rangepicker__cell').classList.add('rangepicker__selected-to');\r\n      }\r\n    }\r\n  }\r\n\r\n  renderCalendar(showDate) {\r\n    const date = new Date(showDate);\r\n    const getGridStartIndex = dayIndex => {\r\n      const index = dayIndex === 0 ? 6 : (dayIndex - 1); // make Sunday (0) the last day\r\n      return index + 1;\r\n    };\r\n\r\n    date.setDate(1);\r\n\r\n    // text-transform: capitalize\r\n    const monthStr = date.toLocaleString('ru', {month: 'long'});\r\n\r\n    let table = `<div class=\"rangepicker__calendar\">\r\n      <div class=\"rangepicker__month-indicator\">\r\n        <time datetime=${monthStr}>${monthStr}</time>\r\n      </div>\r\n      <div class=\"rangepicker__day-of-week\">\r\n        <div>Пн</div><div>Вт</div><div>Ср</div><div>Чт</div><div>Пт</div><div>Сб</div><div>Вс</div>\r\n      </div>\r\n      <div class=\"rangepicker__date-grid\">\r\n    `;\r\n\r\n    // first day of month starts after a space\r\n    // * * * 1 2 3 4\r\n    table += `\r\n      <button type=\"button\"\r\n        class=\"rangepicker__cell\"\r\n        data-value=\"${date.toISOString()}\"\r\n        style=\"--start-from: ${getGridStartIndex(date.getDay())}\">\r\n          ${date.getDate()}\r\n      </button>`;\r\n\r\n    date.setDate(2);\r\n\r\n    while (date.getMonth() === showDate.getMonth()) {\r\n      table += `\r\n        <button type=\"button\"\r\n          class=\"rangepicker__cell\"\r\n          data-value=\"${date.toISOString()}\">\r\n            ${date.getDate()}\r\n        </button>`;\r\n\r\n      date.setDate(date.getDate() + 1);\r\n    }\r\n\r\n    // close the table\r\n    table += '</div></div>';\r\n\r\n    return table;\r\n  }\r\n\r\n  onRangePickerCellClick(target) {\r\n    const { value } = target.dataset;\r\n\r\n    if (value) {\r\n      const dateValue = new Date(value);\r\n\r\n      if (this.selectingFrom) {\r\n        this.selected = {\r\n          from: dateValue,\r\n          to: null\r\n        };\r\n        this.selectingFrom = false;\r\n        this.renderHighlight();\r\n      } else {\r\n        if (dateValue > this.selected.from) {\r\n          this.selected.to = dateValue;\r\n        } else {\r\n          this.selected.to = this.selected.from;\r\n          this.selected.from = dateValue;\r\n        }\r\n\r\n        this.selectingFrom = true;\r\n        this.renderHighlight();\r\n      }\r\n\r\n      if (this.selected.from && this.selected.to) {\r\n        this.dispatchEvent();\r\n        this.close();\r\n        this.subElements.from.innerHTML = RangePicker.formatDate(this.selected.from);\r\n        this.subElements.to.innerHTML = RangePicker.formatDate(this.selected.to);\r\n      }\r\n    }\r\n  }\r\n\r\n  dispatchEvent() {\r\n    this.element.dispatchEvent(new CustomEvent('date-select', {\r\n      bubbles: true,\r\n      detail: this.selected\r\n    }));\r\n  }\r\n\r\n  remove() {\r\n    if (this.element) {\r\n        this.element.remove();\r\n    }\r\n    // TODO: Warning! To remove listener MUST be passes the same event phase\r\n    document.removeEventListener('click', this.onDocumentClick, true);\r\n  }\r\n\r\n  destroy() {\r\n    this.remove();\r\n    this.element = null;\r\n    this.subElements = {};\r\n    this.selectingFrom = true;\r\n    this.selected = {\r\n      from: new Date(),\r\n      to: new Date()\r\n    };\r\n\r\n    return this;\r\n  }\r\n}\r\n"],"sourceRoot":""}