{"version":3,"sources":["webpack:///./src/components/double-slider/index.js","webpack:///./src/pages/products/list/products-header.js","webpack:///./src/pages/products/list/index.js","webpack:///./src/utils/fetch-json.js","webpack:///./src/components/sortable-list/index.js","webpack:///./src/components/sortable-table/index.js","webpack:///./src/utils/escape-html.js"],"names":["DoubleSlider","constructor","min","max","formatValue","value","selected","from","to","event","preventDefault","left","innerLeft","right","innerRight","width","this","subElements","inner","getBoundingClientRect","dragging","thumbLeft","newLeft","clientX","shiftX","parseFloat","thumbRight","style","progress","innerHTML","getValue","newRight","element","classList","remove","document","removeEventListener","onThumbPointerMove","onThumbPointerUp","dispatchEvent","CustomEvent","detail","bubbles","render","createElement","template","firstElementChild","ondragstart","getSubElements","initEventListeners","update","addEventListener","onThumbPointerDown","result","elements","querySelectorAll","subElement","dataset","destroy","rangeTotal","Math","floor","thumbElem","target","add","round","header","id","title","sortable","data","url","sortType","Page","async","URL","arr","fetchJson","filter","item","price","formDoc","forms","input","arrTitle","toUpperCase","indexOf","escapeHtml","arrSatus","selectedIndex","status","components","sortableTable","addRows","onPrice","onProduct","initComponents","now","Date","doubleSlider","setMonth","getMonth","SortableTableProducts","isSortlocaly","randerComponents","Object","keys","forEach","component","root","append","initEventListener","elems","elem","renderForm","formData","getEmptyTemplate","SortableTable","getTableRows","length","map","getTableRow","join","arrSel","querySelector","children","innerText","match","arrSlider","quantity","body","params","response","fetch","toString","err","FetchError","ok","errorText","statusText","json","error","message","Error","super","window","reason","alert","SortableList","items","clientY","moveDraggingAt","prevElem","placeholderElement","previousElementSibling","nextElem","nextElementSibling","lastElementChild","top","firstElementTop","bottom","before","after","height","scrollIfCloseToWindowEdge","dragStop","className","addItems","onPointerDown","closest","dragStart","createPlaceholderElement","draggingElem","elementInitialIndex","x","y","offsetWidth","offsetHeight","pointerShift","addDocumentEventListeners","onPointerMove","onPointerUp","removeDocumentEventListeners","scrollBy","documentElement","clientHeight","placeholderIndex","cssText","replaceWith","type","details","headersConfig","sorted","find","order","isSortLocally","step","start","end","loading","loadData","updateBody","column","newOrder","asc","desc","toggleOrder","arrow","sortLocally","sortOnServer","wrapper","getTable","renderRows","rows","childNodes","searchParams","set","getTableHeader","getHeaderRow","getHeaderSortingArrow","getTableBody","onSortClick","onWindowScroll","sortedData","sortData","customSorting","direction","sort","a","b","localeCompare","reduce","accum","string","replace"],"mappings":"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","file":"products-list-index-js-5.js","sourcesContent":["\r\nexport default class DoubleSlider {\r\n  element;\r\n  subElements = {};\r\n\r\n  onThumbPointerMove = event => {\r\n    event.preventDefault();\r\n\r\n    const { left: innerLeft, right: innerRight, width } = this.subElements.inner.getBoundingClientRect();\r\n\r\n    if (this.dragging === this.subElements.thumbLeft) {\r\n      let newLeft = (event.clientX - innerLeft + this.shiftX) / width;\r\n\r\n      if (newLeft < 0) {\r\n        newLeft = 0;\r\n      }\r\n      newLeft *= 100;\r\n      const right = parseFloat(this.subElements.thumbRight.style.right);\r\n\r\n      if (newLeft + right > 100) {\r\n        newLeft = 100 - right;\r\n      }\r\n\r\n      this.dragging.style.left = this.subElements.progress.style.left = newLeft + '%';\r\n      this.subElements.from.innerHTML = this.formatValue(this.getValue().from);\r\n    }\r\n\r\n    if (this.dragging === this.subElements.thumbRight) {\r\n      let newRight = (innerRight - event.clientX - this.shiftX) / width;\r\n\r\n      if (newRight < 0) {\r\n        newRight = 0;\r\n      }\r\n      newRight *= 100;\r\n\r\n      const left = parseFloat(this.subElements.thumbLeft.style.left);\r\n\r\n      if (left + newRight > 100) {\r\n        newRight = 100 - left;\r\n      }\r\n      this.dragging.style.right = this.subElements.progress.style.right = newRight + '%';\r\n      this.subElements.to.innerHTML = this.formatValue(this.getValue().to);\r\n    }\r\n  };\r\n\r\n  onThumbPointerUp = () => {\r\n    this.element.classList.remove('range-slider_dragging');\r\n\r\n    document.removeEventListener('pointermove', this.onThumbPointerMove);\r\n    document.removeEventListener('pointerup', this.onThumbPointerUp);\r\n\r\n    this.element.dispatchEvent(new CustomEvent('range-select', {\r\n      detail: this.getValue(),\r\n      bubbles: true\r\n    }));\r\n  };\r\n\r\n  constructor({\r\n    min = 100,\r\n    max = 200,\r\n    formatValue = value => '$' + value,\r\n    selected = {\r\n      from: min,\r\n      to: max\r\n    }\r\n  } = {}) {\r\n    this.min = min;\r\n    this.max = max;\r\n    this.formatValue = formatValue;\r\n    this.selected = selected;\r\n\r\n    this.render();\r\n  }\r\n\r\n  get template() {\r\n    const { from, to } = this.selected;\r\n\r\n    return `<div class=\"range-slider\">\r\n      <span data-element=\"from\">${this.formatValue(from)}</span>\r\n      <div data-element=\"inner\" class=\"range-slider__inner\">\r\n        <span data-element=\"progress\" class=\"range-slider__progress\"></span>\r\n        <span data-element=\"thumbLeft\" class=\"range-slider__thumb-left\"></span>\r\n        <span data-element=\"thumbRight\" class=\"range-slider__thumb-right\"></span>\r\n      </div>\r\n      <span data-element=\"to\">${this.formatValue(to)}</span>\r\n    </div>`;\r\n  }\r\n\r\n  render() {\r\n    const element = document.createElement('div');\r\n\r\n    element.innerHTML = this.template;\r\n\r\n    this.element = element.firstElementChild;\r\n    this.element.ondragstart = () => false;\r\n\r\n    this.subElements = this.getSubElements(element);\r\n\r\n    this.initEventListeners();\r\n\r\n    this.update();\r\n  }\r\n\r\n  initEventListeners() {\r\n    const { thumbLeft, thumbRight } = this.subElements;\r\n\r\n    thumbLeft.addEventListener('pointerdown', event => this.onThumbPointerDown(event));\r\n    thumbRight.addEventListener('pointerdown', event => this.onThumbPointerDown(event));\r\n  }\r\n\r\n  getSubElements(element) {\r\n    const result = {};\r\n    const elements = element.querySelectorAll('[data-element]');\r\n\r\n    for (const subElement of elements) {\r\n      const name = subElement.dataset.element;\r\n\r\n      result[name] = subElement;\r\n    }\r\n\r\n    return result;\r\n  }\r\n\r\n  remove() {\r\n    this.element.remove();\r\n  }\r\n\r\n  destroy() {\r\n    this.remove();\r\n    document.removeEventListener('pointermove', this.onThumbPointerMove);\r\n    document.removeEventListener('pointerup', this.onThumbPointerUp);\r\n  }\r\n\r\n  update() {\r\n    const rangeTotal = this.max - this.min;\r\n    const left = Math.floor((this.selected.from - this.min) / rangeTotal * 100) + '%';\r\n    const right = Math.floor((this.max - this.selected.to) / rangeTotal * 100) + '%';\r\n\r\n    this.subElements.progress.style.left = left;\r\n    this.subElements.progress.style.right = right;\r\n\r\n    this.subElements.thumbLeft.style.left = left;\r\n    this.subElements.thumbRight.style.right = right;\r\n  }\r\n\r\n  onThumbPointerDown(event) {\r\n    const thumbElem = event.target;\r\n\r\n    event.preventDefault();\r\n\r\n    const { left, right } = thumbElem.getBoundingClientRect();\r\n\r\n    if (thumbElem === this.subElements.thumbLeft) {\r\n      this.shiftX = right - event.clientX;\r\n    } else {\r\n      this.shiftX = left - event.clientX;\r\n    }\r\n\r\n    this.dragging = thumbElem;\r\n\r\n    this.element.classList.add('range-slider_dragging');\r\n\r\n    document.addEventListener('pointermove', this.onThumbPointerMove);\r\n    document.addEventListener('pointerup', this.onThumbPointerUp);\r\n  }\r\n\r\n  getValue() {\r\n    const rangeTotal = this.max - this.min;\r\n    const { left } = this.subElements.thumbLeft.style;\r\n    const { right } = this.subElements.thumbRight.style;\r\n\r\n    const from = Math.round(this.min + parseFloat(left) * 0.01 * rangeTotal);\r\n    const to = Math.round(this.max - parseFloat(right) * 0.01 * rangeTotal);\r\n\r\n    return { from, to };\r\n  }\r\n}\r\n//}\r\n","const header = [\r\n  {\r\n    id: 'images',\r\n    title: 'Фото',\r\n    sortable: false,\r\n    template: data => {\r\n      return `\r\n          <div class=\"sortable-table__cell\">\r\n            <img class=\"sortable-table-image\" alt=\"Image\" src=\"${data[0].url}\">\r\n          </div>\r\n        `;\r\n    }\r\n  },\r\n  {\r\n    id: 'title',\r\n    title: 'Название',\r\n    sortable: true,\r\n    sortType: 'string'\r\n  },\r\n  {\r\n    id: 'subcategory',\r\n    title: 'Категория',\r\n    sortable: false,\r\n    template: data => {\r\n      return `<div class=\"sortable-table__cell\">\r\n          ${data}\r\n        </div>`;\r\n    }\r\n  },\r\n  {\r\n    id: 'quantity',\r\n    title: 'Количество',\r\n    sortable: true,\r\n    sortType: 'number'\r\n  },\r\n  {\r\n    id: 'price',\r\n    title: 'Цена',\r\n    sortable: true,\r\n    sortType: 'number'\r\n  },\r\n  \r\n  {\r\n    id: 'status',\r\n    title: 'Статус',\r\n    sortable: true,\r\n    sortType: 'number',\r\n    template: data => {\r\n      return `<div class=\"sortable-table__cell\">\r\n          ${data > 0 ? 'Активен' : 'Неактивен'}\r\n        </div>`;\r\n    }\r\n  },\r\n];\r\nexport default header;\r\n","import SortableList from '../../../components/sortable-list/index.js';\r\nimport SortableTable from '../../../components/sortable-table/index.js';\r\nimport DoubleSlider from '../../../components/double-slider/index.js';\r\nimport escapeHtml from '../../../utils/escape-html.js';\r\nimport fetchJson from '../../../utils/fetch-json.js';\r\nimport header from './products-header.js';\r\n\r\n\r\nconst IMGUR_CLIENT_ID = `${process.env.IMGUR_CLIENT_ID}`;  \r\nconst BACKEND_URL = `${process.env.BACKEND_URL}`; \r\n\r\nexport default class Page {\r\n  element;\r\n  subElements = {};\r\n  from = 0; \r\n  to = 4000;\r\n  constructor() {\r\n    this.render();\r\n  }\r\n\r\n  onPrice(from, to) {\r\n        this.from = from;\r\n        this.to = to;\r\n        this.onProduct();\r\n  }\r\n\r\n  onProduct = async () => {\r\n       const url = new URL(`api/rest/products`, BACKEND_URL);\r\n       const data = await fetchJson(url);\r\n        const arr = data.filter(item => \r\n           item.price > this.from && item.price < this.to \r\n       );\r\n       const formDoc = document.forms[0];\r\n       const input = formDoc[0].value; \r\n       const arrTitle = arr.filter(item => \r\n           item.title.toUpperCase().indexOf(escapeHtml(input).toUpperCase()) !== -1   \r\n       );\r\n       let arrSatus;\r\n       switch(formDoc[1].selectedIndex) {\r\n          case 0:\r\n              arrSatus = arrTitle;\r\n              break;\r\n          case 1:\r\n              arrSatus = arrTitle.filter(item => item.status === 1);  \r\n              break;\r\n          case 2:\r\n              arrSatus = arrTitle.filter(item => item.status === 0);  \r\n              break;\r\n      }\r\n      this.components.sortableTable.addRows(arrSatus);\r\n  }\r\n\r\n  initComponents() {\r\n        const now = new Date(); \r\n        const from = new Date(); \r\n        const to = new Date( now.setMonth( now.getMonth() - 1 ) );\r\n        \r\n        const doubleSlider = new DoubleSlider( { \r\n            min: 0,\r\n            max: 4000\r\n        } );\r\n\r\n\r\n        const sortableTable = new SortableTableProducts(header, {\r\n            url: `api/rest/products`,   \r\n            isSortlocaly: true\r\n        });\r\n\r\n        this.components = {\r\n            doubleSlider,\r\n            sortableTable,\r\n        };\r\n  }\r\n\r\n  randerComponents() {\r\n        Object.keys(this.components).forEach(component => {\r\n            const root = this.subElements[component];\r\n            const { element } = this.components[component];\r\n\r\n            root.append(element);\r\n        });\r\n  }\r\n\r\n  get template() {\r\n    return `<div class=\"products-list\">\r\n                <div class=\"content__top-panel\">\r\n                    <h1 class=\"page_title\">Товары</h1>\r\n                    <a href=\"products/add\" class=\"button-primary\">Добавить товар</a>\r\n                 </div>\r\n                 <div class=\"content-box content-box_small\" >\r\n                    <form class=\"form-inline\" >\r\n                      <div class=\"form-group\" >\r\n                        <label class=\"form-label\" >Сортировать по:</label>\r\n                        <input type=\"text\" data-elem=\"filterName\" class=\"form-control\" placeholder=\"Название товара\" ></input>\r\n                      </div>\r\n                      <div class=\"form-group\" data-elem=\"sliderContainer\" >\r\n                        <label class=\"form-label\" >Цена:</label>\r\n                        <div data-element=\"doubleSlider\" >\r\n                        </div>\r\n                      </div>\r\n                      <div class=\"form-group\" >\r\n                        <label class=\"form-label\" >Статус:</label>\r\n                        <select class=\"form-control\" data-elem=\"filterStatus\" >\r\n                          <option value selected > Любой </option>\r\n                          <option value=\"1\" >Активный</option>\r\n                          <option value=\"0\" >Неактивный</option>\r\n                        </select>\r\n                      </div>\r\n                    </form>\r\n                </div>\r\n                <div data-elem=\"productsContainer\" class=\"products-list__container\">\r\n                    <div data-element=\"sortableTable\"></div>\r\n                </div>\r\n              </div>\r\n          </div>`;\r\n  }\r\n\r\n  \r\n\r\n   initEventListener() {\r\n        const elems = this.element.querySelectorAll(\".form-control\");   //\"form-control\"\r\n        for(const elem of elems) {\r\n             if (elem.dataset.elem === \"filterName\") {\r\n                elem.addEventListener('input', this.onProduct);\r\n             } else if (elem.dataset.elem === \"filterStatus\") {\r\n                elem.addEventListener('change', this.onProduct);\r\n             } \r\n        }\r\n        this.components.doubleSlider.element.addEventListener('range-select', event => {  \r\n            const {from, to } = event.detail;\r\n            this.onPrice(from, to);\r\n        });\r\n  }\r\n\r\n\r\n  render() {\r\n\r\n        this.element = document.createElement('div'); // (*)\r\n       \r\n        this.element.innerHTML = this.template;\r\n        this.element = this.element.firstElementChild;\r\n        this.subElements = this.getSubElements(this.element);\r\n\r\n        this.initComponents();\r\n        this.randerComponents();\r\n        this.initEventListener();\r\n        return this.element;\r\n  }\r\n\r\n  renderForm() {\r\n    const element = document.createElement('div');\r\n\r\n    element.innerHTML = this.formData\r\n      ? this.template()\r\n      : this.getEmptyTemplate();\r\n\r\n    this.element = element.firstElementChild;\r\n\r\n    this.subElements = this.getSubElements(this.element);\r\n  }\r\n\r\n  getEmptyTemplate() {\r\n    return `<div>\r\n      <h1 class=\"page-title\">Страница не найдена</h1>\r\n      <p>Извините, данный товар не существует</p>\r\n    </div>`;\r\n  }\r\n\r\n\r\n  getSubElements(element) {\r\n    const subElements = {};\r\n    const elements = element.querySelectorAll('[data-element]');\r\n\r\n    for (const item of elements) {\r\n      subElements[item.dataset.element] = item;\r\n    }\r\n\r\n    return subElements;\r\n  }\r\n\r\n\r\n  destroy() {\r\n    this.remove();\r\n    this.element = null;\r\n    this.subElements = null;\r\n  }\r\n\r\n  remove() {\r\n    if(this.element) {\r\n        this.element.remove();\r\n    }\r\n  }\r\n}\r\n\r\nexport class SortableTableProducts extends SortableTable {\r\n      \r\n     getTableRows(data=[]) {\r\n         if(!data.length) {\r\n            return;\r\n         }\r\n         return data.map(item => `\r\n           <a href=/products/${item.id} class=\"sortable-table__row\">\r\n             ${this.getTableRow(item, data)}\r\n           </a>`\r\n        ).join('');\r\n    }\r\n\r\n    addRows(data=[]) {\r\n         const formDoc = document.forms[0];\r\n         const input = formDoc[0].value; //const elem = document.querySelector(\"form-control\");   ///document.forms[0];\r\n         let arr = data.filter(item => \r\n            item.title.toUpperCase().indexOf(escapeHtml(input).toUpperCase()) !== -1   \r\n         );\r\n\r\n         let arrSel;\r\n         switch(formDoc[1].selectedIndex) {\r\n            case 0:\r\n                arrSel = arr;\r\n                break;\r\n            case 1:\r\n                arrSel = arr.filter(item => item.status === 1);  \r\n                break;\r\n            case 2:\r\n                arrSel = arr.filter(item => item.status === 0);  \r\n                break;\r\n         }\r\n\r\n         let from; let to;\r\n         const elem = document.querySelector(\".range-slider\");\r\n         for(let element of elem.children) {\r\n            if (element.dataset.element===\"from\") {\r\n                from = escapeHtml(element.innerText).match(/\\d/g).join('');   \r\n            } else if (element.dataset.element===\"to\") {\r\n                to = escapeHtml(element.innerText).match(/\\d/g).join('');  \r\n            }\r\n         }\r\n\r\n        const arrSlider = arrSel.filter(item => \r\n        item.quantity > from && item.quantity < to \r\n        );\r\n        this.subElements.body.innerHTML = this.getTableRows(arrSlider);\r\n        \r\n   }\r\n  \r\n}","// same as fetch, but throws FetchError in case of errors\r\n// status >= 400 is an error\r\n// network error / json error are errors\r\n\r\nexport default async function(url, params) {\r\n  let response;\r\n\r\n  try {\r\n    // NOTE: \"toString\" call needed for correct work of \"jest-fetch-mock\"\r\n    response = await fetch(url.toString(), params);\r\n  } catch(err) {\r\n    throw new FetchError(response, \"Network error has occurred.\");\r\n  }\r\n\r\n  let body;\r\n\r\n  if (!response.ok) {\r\n    let errorText = response.statusText; // Not Found (for 404)\r\n\r\n    try {\r\n      body = await response.json();\r\n\r\n      errorText = (body.error && body.error.message) || (body.data && body.data.error && body.data.error.message) || errorText;\r\n    } catch (error) { /* ignore failed body */ }\r\n\r\n    let message = `Error ${response.status}: ${errorText}`;\r\n\r\n    throw new FetchError(response, body, message);\r\n  }\r\n\r\n  try {\r\n    return await response.json();\r\n  } catch(err) {\r\n    throw new FetchError(response, null, err.message);\r\n  }\r\n}\r\n\r\nexport class FetchError extends Error {\r\n  name = \"FetchError\";\r\n\r\n  constructor(response, body, message) {\r\n    super(message);\r\n    this.response = response;\r\n    this.body = body;\r\n  }\r\n}\r\n\r\n// handle uncaught failed fetch through\r\nwindow.addEventListener('unhandledrejection', event => {\r\n  if (event.reason instanceof FetchError) {\r\n    alert(event.reason.message);\r\n  }\r\n});\r\n\r\n","export default class SortableList {\r\n  \r\n  onPointerMove = ({ clientX, clientY }) => {\r\n    this.moveDraggingAt(clientX, clientY);\r\n\r\n    const prevElem = this.placeholderElement.previousElementSibling;\r\n    const nextElem = this.placeholderElement.nextElementSibling;\r\n\r\n    const { firstElementChild, lastElementChild } = this.element;\r\n    const { top: firstElementTop } = firstElementChild.getBoundingClientRect();\r\n    const { bottom } = this.element.getBoundingClientRect();\r\n\r\n    if (clientY < firstElementTop) {\r\n      return firstElementChild.before(this.placeholderElement);\r\n    }\r\n\r\n    if (clientY > bottom) {\r\n      return lastElementChild.after(this.placeholderElement);\r\n    }\r\n\r\n    if (prevElem) {\r\n      const { top, height } = prevElem.getBoundingClientRect();\r\n      const middlePrevElem = top + height / 2;\r\n\r\n      if (clientY < middlePrevElem) {\r\n        return prevElem.before(this.placeholderElement);\r\n      }\r\n    }\r\n\r\n    if (nextElem) {\r\n      const { top, height } = nextElem.getBoundingClientRect();\r\n      const middleNextElem = top + height / 2;\r\n\r\n      if (clientY > middleNextElem && nextElem.nextElementSibling) {\r\n        return nextElem.after(this.placeholderElement);\r\n      } else if (!nextElem.nextElementSibling ) {\r\n           return nextElem.before(this.placeholderElement);\r\n      } \r\n    }\r\n\r\n    this.scrollIfCloseToWindowEdge(clientY);\r\n  };\r\n\r\n  onPointerUp = () => {\r\n    this.dragStop();\r\n  };\r\n\r\n  constructor({ items = [] } = {}) {\r\n    this.items = items;\r\n\r\n    this.render();\r\n  }\r\n\r\n  render() {\r\n    this.element = document.createElement('ul');\r\n    this.element.className = 'sortable-list';\r\n\r\n    this.addItems();\r\n    this.initEventListeners();\r\n  }\r\n\r\n  addItems() {\r\n    // item is a DOM element\r\n    for (const item of this.items) {\r\n      item.classList.add('sortable-list__item');\r\n    }\r\n\r\n    this.element.append(...this.items);\r\n  }\r\n\r\n  initEventListeners () {\r\n    this.element.addEventListener('pointerdown', event => {\r\n      this.onPointerDown(event);\r\n    });\r\n  }\r\n\r\n  onPointerDown (event) {\r\n    const element = event.target.closest('.sortable-list__item');\r\n\r\n    if (element) {\r\n      if (event.target.closest('[data-grab-handle]')) {\r\n        event.preventDefault();\r\n        this.dragStart(element, event);\r\n      }\r\n\r\n      if (event.target.closest('[data-delete-handle]')) {\r\n        event.preventDefault();\r\n\r\n        element.remove();\r\n      }\r\n    }\r\n  }\r\n\r\n  createPlaceholderElement (width, height) {\r\n    const element = document.createElement('li');\r\n\r\n    element.className = 'sortable-list__placeholder';\r\n    element.style.width = `${width}px`;\r\n    element.style.height = `${height}px`;\r\n\r\n    return element;\r\n  }\r\n\r\n  dragStart(element, {clientX, clientY}) {\r\n    this.draggingElem = element;\r\n    this.elementInitialIndex = [...this.element.children].indexOf(element);\r\n\r\n    const { x, y } = element.getBoundingClientRect();\r\n    const { offsetWidth, offsetHeight } = element;\r\n\r\n    this.pointerShift = {\r\n      x: clientX - x,\r\n      y: clientY - y\r\n    };\r\n\r\n    this.draggingElem.style.width = `${offsetWidth}px`;\r\n    this.draggingElem.style.height = `${offsetHeight}px`;\r\n    this.draggingElem.classList.add('sortable-list__item_dragging');\r\n\r\n    this.placeholderElement = this.createPlaceholderElement(offsetWidth, offsetHeight);\r\n\r\n    this.draggingElem.after(this.placeholderElement);\r\n    // move to the end, to be over other list elements\r\n    this.element.append(this.draggingElem);\r\n    this.moveDraggingAt(clientX, clientY);\r\n    this.addDocumentEventListeners();\r\n  }\r\n\r\n  addDocumentEventListeners () {\r\n    document.addEventListener('pointermove', this.onPointerMove);\r\n    document.addEventListener('pointerup', this.onPointerUp);\r\n  }\r\n\r\n  removeDocumentEventListeners () {\r\n    document.removeEventListener('pointermove', this.onPointerMove);\r\n    document.removeEventListener('pointerup', this.onPointerUp);\r\n  }\r\n\r\n  moveDraggingAt(clientX, clientY) {\r\n    this.draggingElem.style.left = `${clientX - this.pointerShift.x}px`;\r\n    this.draggingElem.style.top = `${clientY - this.pointerShift.y}px`;\r\n  }\r\n\r\n  scrollIfCloseToWindowEdge(clientY) {\r\n    const scrollingValue = 10;\r\n    const threshold = 20;\r\n\r\n    if (clientY < threshold) {\r\n      window.scrollBy(0, -scrollingValue);\r\n    } else if (clientY > document.documentElement.clientHeight - threshold) {\r\n      window.scrollBy(0, scrollingValue);\r\n    }\r\n  }\r\n\r\n  dragStop() {\r\n    const placeholderIndex = [...this.element.children].indexOf(this.placeholderElement);\r\n\r\n    this.draggingElem.style.cssText = '';\r\n    this.draggingElem.classList.remove('sortable-list__item_dragging');\r\n    this.placeholderElement.replaceWith(this.draggingElem);\r\n    this.draggingElem = null;\r\n\r\n    this.removeDocumentEventListeners();\r\n\r\n    if (placeholderIndex !== this.elementInitialIndex) {\r\n      this.dispatchEvent('sortable-list-reorder', {\r\n        from: this.elementInitialIndex,\r\n        to: placeholderIndex\r\n      });\r\n    }\r\n  }\r\n\r\n  dispatchEvent (type, details) {\r\n\r\n    this.element.dispatchEvent(new CustomEvent(type, {\r\n      bubbles: true,\r\n      details\r\n    }));\r\n\r\n  }\r\n\r\n  remove () {\r\n    if (this.element) {\r\n      this.element.remove();\r\n    }\r\n  }\r\n\r\n  destroy () {\r\n    this.remove();\r\n    this.removeDocumentEventListeners();\r\n    this.element = null;\r\n  }\r\n}","import fetchJson from \"../../utils/fetch-json.js\";\r\n\r\nconst BACKEND_URL = `${process.env.BACKEND_URL}`; \r\n\r\nexport default class SortableTable {\r\n  element;\r\n  subElements = {};\r\n  data = [];\r\n  loading = false;\r\n  step = 20;\r\n  start = 1;\r\n  end = this.start + this.step;\r\n\r\n  onWindowScroll = async () => {\r\n    const { bottom } = this.element.getBoundingClientRect();\r\n    const { id, order } = this.sorted;\r\n\r\n    if (bottom < document.documentElement.clientHeight && !this.loading && !this.isSortLocally) {\r\n      this.start = this.end;\r\n      this.end = this.start + this.step;\r\n\r\n      this.loading = true;\r\n\r\n      const data = await this.loadData(id, order, this.start, this.end);\r\n\r\n      this.updateBody(data);\r\n\r\n      this.loading = false;\r\n    }\r\n  };\r\n\r\n  onSortClick = event => {\r\n    const column = event.target.closest('[data-sortable=\"true\"]');\r\n    const toggleOrder = order => {\r\n      const orders = {\r\n        asc: 'desc',\r\n        desc: 'asc'\r\n      };\r\n\r\n      return orders[order];\r\n    };\r\n\r\n    if (column) {\r\n      const { id, order } = column.dataset;\r\n      const newOrder = toggleOrder(order);\r\n\r\n      this.sorted = {\r\n        id,\r\n        order: newOrder\r\n      };\r\n\r\n      column.dataset.order = newOrder;\r\n      column.append(this.subElements.arrow);\r\n\r\n      if (this.isSortLocally) {\r\n        this.sortLocally(id, newOrder);\r\n      } else {\r\n        this.sortOnServer(id, newOrder, 1, 1 + this.step);\r\n      }\r\n    }\r\n  };\r\n\r\n  constructor(headersConfig = [], {\r\n    url = '',\r\n    sorted = {\r\n      id: headersConfig.find(item => item.sortable).id,\r\n      order: 'asc'\r\n    },\r\n    isSortLocally = false,\r\n    step = 20,\r\n    start = 1,\r\n    end = start + step\r\n  } = {}) {\r\n\r\n    this.headersConfig = headersConfig;\r\n    this.url = new URL(url, BACKEND_URL);\r\n    this.sorted = sorted;\r\n    this.isSortLocally = isSortLocally;\r\n    this.step = step;\r\n    this.start = start;\r\n    this.end = end;\r\n\r\n    this.render();\r\n    this.update();\r\n  }\r\n\r\n  render() {\r\n    const wrapper = document.createElement('div');\r\n\r\n    wrapper.innerHTML = this.getTable([]);\r\n\r\n    const element = wrapper.firstElementChild;\r\n\r\n    this.element = element;\r\n    this.subElements = this.getSubElements(element);\r\n  }\r\n\r\n  async update () {\r\n    const {id, order} = this.sorted;\r\n    this.data = await this.loadData(id, order, this.start, this.end);\r\n    \r\n    this.renderRows([...this.data]);\r\n    this.initEventListeners();\r\n  }\r\n\r\n  addRows(data) {\r\n\r\n    this.subElements.body.innerHTML = this.getTableRows(data);\r\n  }\r\n\r\n  updateBody(data) {\r\n    const rows = document.createElement('div');\r\n\r\n    data = [...this.data, ...data];\r\n    rows.innerHTML = this.getTableRows(data);\r\n\r\n    this.subElements.body.append(...rows.childNodes);\r\n  }\r\n\r\n  //Request URL: https://course-js.javascript.ru/api/rest/orders?createdAt_gte=2021-05-14T10%3A35%3A51.666Z&createdAt_lte=2021-06-13T10%3A35%3A51.666Z&_sort=createdAt&_order=desc&_start=0&_end=30\r\n  async loadData(id, order, start = this.start, end = this.end) {\r\n    this.url.searchParams.set('_sort', id);\r\n    this.url.searchParams.set('_order', order);\r\n    this.url.searchParams.set('_start', start);\r\n    this.url.searchParams.set('_end', end);\r\n\r\n    this.element.classList.add('sortable-table_loading');\r\n\r\n    const data = await fetchJson(this.url); // n кол-во времени\r\n\r\n    this.element.classList.remove('sortable-table_loading');\r\n    return data;\r\n  }\r\n\r\n  getTableHeader() {\r\n    return `<div data-element=\"header\" class=\"sortable-table__header sortable-table__row\">\r\n      ${this.headersConfig.map(item => this.getHeaderRow(item)).join('')}\r\n    </div>`;\r\n  }\r\n\r\n  getHeaderRow({id, title, sortable}) {\r\n    const order = this.sorted.id === id ? this.sorted.order : 'asc';\r\n\r\n    return `\r\n      <div class=\"sortable-table__cell\" data-id=\"${id}\" data-sortable=\"${sortable}\" data-order=\"${order}\">\r\n        <span>${title}</span>\r\n        ${this.getHeaderSortingArrow(id)}\r\n      </div>\r\n    `;\r\n  }\r\n\r\n  getHeaderSortingArrow(id) {\r\n    const isOrderExist = this.sorted.id === id ? this.sorted.order : '';\r\n\r\n    return isOrderExist\r\n      ? `<span data-element=\"arrow\" class=\"sortable-table__sort-arrow\">\r\n          <span class=\"sort-arrow\"></span>\r\n        </span>`\r\n      : '';\r\n  }\r\n\r\n  getTableBody(data) {\r\n    return `\r\n      <div data-element=\"body\" class=\"sortable-table__body\">\r\n        ${this.getTableRows(data)}\r\n      </div>`;\r\n  }\r\n\r\n  getTableRows(data) {\r\n    return data.map(item => `\r\n      <div class=\"sortable-table__row\">\r\n        ${this.getTableRow(item, data)}\r\n      </div>`\r\n    ).join('');\r\n  }\r\n\r\n  getTableRow(item) {\r\n    const cells = this.headersConfig.map(({id, template}) => {\r\n      return {\r\n        id,\r\n        template\r\n      };\r\n    });\r\n\r\n    return cells.map(({id, template}) => {\r\n      return template\r\n        ? template(item[id])\r\n        : `<div class=\"sortable-table__cell\">${item[id]}</div>`;\r\n    }).join('');\r\n  }\r\n\r\n  getTable(data=[]) {\r\n    return `\r\n      <div class=\"sortable-table\">\r\n        ${this.getTableHeader()}\r\n        ${this.getTableBody(data)}\r\n        <div data-element=\"loading\" class=\"loading-line sortable-table__loading-line\"></div>\r\n        <div data-element=\"emptyPlaceholder\" class=\"sortable-table__empty-placeholder\">\r\n          No products\r\n        </div>\r\n      </div>`;\r\n  }\r\n\r\n  initEventListeners() {\r\n    this.subElements.header.addEventListener('pointerdown', this.onSortClick);\r\n\r\n    document.addEventListener('scroll', this.onWindowScroll);\r\n  }\r\n\r\n  sortLocally(id, order) {\r\n    const sortedData = this.sortData(id, order);\r\n\r\n    this.subElements.body.innerHTML = this.getTableBody(sortedData);\r\n  }\r\n\r\n  async sortOnServer(id, order, start, end) {\r\n    const data = await this.loadData(id, order, start, end);\r\n\r\n    this.renderRows(data);\r\n  }\r\n\r\n  renderRows(data) {\r\n    if (data.length) {\r\n      this.element.classList.remove('sortable-table_empty');\r\n      this.addRows(data);\r\n    } else {\r\n      this.element.classList.add('sortable-table_empty');\r\n    }\r\n  }\r\n\r\n  sortData(id, order) {\r\n    const arr = [...this.data];\r\n    const column = this.headersConfig.find(item => item.id === id);\r\n    const {sortType, customSorting} = column;\r\n    const direction = order === 'asc' ? 1 : -1;\r\n\r\n    return arr.sort((a, b) => {\r\n      switch (sortType) {\r\n      case 'number':\r\n        return direction * (a[id] - b[id]);\r\n      case 'string':\r\n        return direction * a[id].localeCompare(b[id], 'ru');\r\n      case 'custom':\r\n        return direction * customSorting(a, b);\r\n      default:\r\n        return direction * (a[id] - b[id]);\r\n      }\r\n    });\r\n  }\r\n\r\n  getSubElements(element) {\r\n    const elements = element.querySelectorAll('[data-element]');\r\n\r\n    return [...elements].reduce((accum, subElement) => {\r\n      accum[subElement.dataset.element] = subElement;\r\n\r\n      return accum;\r\n    }, {});\r\n  }\r\n\r\n  remove() {\r\n    this.element.remove();\r\n  }\r\n\r\n  destroy() {\r\n    this.remove();\r\n    this.subElements = {};\r\n    document.removeEventListener('scroll', this.onWindowScroll);\r\n  }\r\n}","export default string => string\r\n  .replace(/&/g, '&amp;')\r\n  .replace(/\"/g, '&quot;')\r\n  .replace(/'/g, '&#39;')\r\n  .replace(/</g, '&lt;')\r\n  .replace(/>/g, '&gt;');\r\n"],"sourceRoot":""}